{% extends 'base.html' %}
{% block title %}ویرایش گروه{% endblock %}

{% block content %}
<div class="post-card p-3">
    <h4 class="mb-4 border-bottom pb-2">ویرایش گروه</h4>

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-danger">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="group_name" class="form-label">نام گروه:</label>
            <input type="text" name="group_name" id="group_name" class="form-control" value="{{ thread.name }}" required>
        </div>
        <h5 class="mt-4">ویرایش اعضا:</h5>
        <div style="max-height: 300px; overflow-y: auto;">
        {% for user_item in potential_members %}
            {% if user_item != request.user %}
            <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" name="users" value="{{ user_item.id }}" id="user-{{ user_item.id }}"
                    {% if user_item.id in current_member_ids %}checked{% endif %}>
                <label class="form-check-label" for="user-{{ user_item.id }}">{{ user_item.username }}</label>
            </div>
            {% endif %}
        {% empty %}
            <p class="text-muted">کسی شما را دنبال نمی‌کند تا به گروه اضافه کنید.</p>
        {% endfor %}
        </div>
        <button type="submit" class="btn btn-primary w-100 mt-3">ذخیره تغییرات</button>
    </form>
</div>
{% endblock %}